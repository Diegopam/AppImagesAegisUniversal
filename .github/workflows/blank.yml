steps:
  - uses: actions/checkout@v4

  - name: Verificar etiquetas permitidas
    run: |
      echo "Etiquetas do PR:"
      echo '${{ toJson(github.event.pull_request.labels) }}'

      LABELS=$(echo '${{ toJson(github.event.pull_request.labels) }}' | grep -o '"name":"[^"]*"' | cut -d':' -f2 | tr -d '"')

      echo "Labels encontradas:"
      echo "$LABELS"

      if echo "$LABELS" | grep -qE '^(aegis-framework|universal-framework|appimage-generic)$'; then
        echo "Etiqueta válida encontrada. PR permitido ✅"
      else
        echo "Nenhuma etiqueta válida encontrada. PR bloqueado ❌"
        exit 1
      fi
